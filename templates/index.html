<!DOCTYPE html>
<head lang="de">
    <title>Calendar</title>
    {{template "head.html" .}}
    <script>
        // Because this is potentially a redirect, we run it as soon as possible
        let stored_profile = window.localStorage.getItem('profile');
        if (stored_profile !== null) {
            let profile_url = ({{((.Router.Get "monthlyView").URL "profile" "%PROFILE%").Path}}).replace('%PROFILE%', encodeURIComponent(stored_profile));
            window.location.href =  profile_url;
        }
    </script>
</head>

<body>
    {{template "nav.html" .}}
    <main class="container">
        {{if .Profiles}}
		<div class="w-50 mx-auto">
        <select class="form-control" id="main-profile">
			<option></option>
            {{range .Profiles}}
            <option value="{{.ViewURL}}"{{if eq .Name $.ProfileName}} selected{{end}}>{{.Name}}</option>
            {{end}}
        </select>
		</div>
        {{end}}
    </main>
    {{template "footer.html" .}}
    <script>
		initSelect2('#main-profile');
    </script>
</body>